<?php $n=get_declared_classes();require'c.inc';$s=$_SERVER;$m=$s['REQUEST_METHOD'];$u=@$s['PATH_INFO']?$s['PATH_INFO']:'/';foreach(array_diff(get_declared_classes(),$n)as$c){if(preg_match(sprintf('!^%s$!',constant("{$c}::URI")),$u)){if(!method_exists($c,$m))continue;$c=new$c;$c->req=new Req;$c->req->m=$m;return$c->$m()->send();}}class Req{function __call($m,$a){switch($m){case'param':$p=$GLOBALS['_'.$this->m];break;default:$p=@$GLOBALS['_'.strtoupper($m)];}return@$p[$a[0]]?$p[$a[0]]:@$a[1];}}class Res{function send(){foreach((array)$this->header as$h)header($h);foreach((array)$this->cookie as$c)call_user_func_array('setrawcookie',$c);echo$this->content;}}